name: Deploy Frontend to GitHub Pages

on:
  # ç›‘å¬ main åˆ†æ”¯çš„æ¨é€
  push:
    branches: ["main"]
    # åªæœ‰å½“ frontend æ–‡ä»¶å¤¹å‘ç”Ÿå˜åŠ¨æ—¶æ‰è§¦å‘ï¼ˆèŠ‚çœèµ„æºï¼‰
    paths:
      - 'frontend/**'

  # å…è®¸åœ¨ Actions é¡µé¢æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®è§¦å‘ï¼ˆæ–¹ä¾¿æµ‹è¯•ï¼‰
  workflow_dispatch:

# è®¾ç½®æƒé™ (GitHub Pages éƒ¨ç½²å¿…é¡»)
permissions:
  contents: read
  pages: write
  id-token: write

# å¹¶å‘æ§åˆ¶ï¼šå¦‚æœæœ‰å¤šä¸ªéƒ¨ç½²åŒæ—¶è¿›è¡Œï¼Œå–æ¶ˆæ—§çš„ï¼Œåªè·‘æœ€æ–°çš„
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Setup Pages
        uses: actions/configure-pages@v3

      - name: Upload Artifact
        uses: actions/upload-pages-artifact@v2
        with:
          # ğŸš¨ å…³é”®è®¾ç½®ï¼šå‘Šè¯‰ GitHub ä½ çš„ç½‘é¡µéƒ½åœ¨ frontend æ–‡ä»¶å¤¹é‡Œ
          # å¦‚æœä½ ä»¥åæ”¹äº†æ–‡ä»¶å¤¹åï¼Œè®°å¾—æ”¹è¿™é‡Œ
          path: './frontend'

      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v2